---
permalink: online-help/concept-how-user-defined-performance-threshold-policies-work-opm.html 
sidebar: sidebar 
keywords:  
summary: '您可以对存储对象(例如聚合和卷)设置性能阈值策略、以便将事件发送给存储管理员、通知管理员集群遇到性能问题描述。' 
---
= 用户定义的性能阈值策略的工作原理
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
您可以对存储对象（例如聚合和卷）设置性能阈值策略，以便将事件发送给存储管理员，通知管理员集群遇到性能问题描述。

您可以通过以下方式为存储对象创建性能阈值策略：

* 选择存储对象
* 选择与该对象关联的性能计数器
* 指定用于定义性能计数器上限的值，这些上限被视为警告和严重情况
* 指定一个时间段，用于定义计数器必须超过上限的时间长度


例如，您可以为卷设置性能阈值策略，以便每当卷的 IOPS 超过每秒 750 次操作且持续 10 分钟时，您都会收到严重事件通知。此阈值策略还可以指定当 IOPS 超过每秒 500 次操作且持续 10 分钟时发送警告事件。

[NOTE]
====
当前版本提供的阈值用于在计数器值超过阈值设置时发送事件。您不能设置在计数器值低于阈值设置时发送事件的阈值。

====
此处显示了一个计数器图表示例，表示在 1 ： 00 时违反警告阈值（黄色图标），在 12 ： 10 ， 12 ： 30 和 1 ： 10 时违反严重阈值（红色图标）：

image::../media/opm2-threshold-breach.gif[违反 opm2 阈值]

必须在指定的持续时间内持续违反阈值。如果由于任何原因阈值降至限制值以下，则后续违反将视为新持续时间的开始。

通过某些集群对象和性能计数器，您可以创建一个组合阈值策略，该策略要求两个性能计数器在生成事件之前超过其最大限制。例如，您可以使用以下条件创建阈值策略：

|===
| 集群对象 | 性能计数器 | 警告阈值 | 严重阈值 | Duration 


 a| 
Volume
 a| 
延迟
 a| 
10 毫秒
 a| 
20 毫秒
 a| 
15 分钟

|===
使用两个集群对象的阈值策略仅在同时违反两个条件时生成发生原因事件。例如，使用表中定义的阈值策略：

|===


| 卷延迟平均值 | 聚合磁盘利用率 | 那么 ... 


 a| 
15 毫秒
 a| 
50%
 a| 
未报告任何事件。



 a| 
15 毫秒
 a| 
75%
 a| 
报告警告事件。



 a| 
25 毫秒
 a| 
75%
 a| 
报告警告事件。



 a| 
25 毫秒
 a| 
90%
 a| 
报告严重事件。

|===